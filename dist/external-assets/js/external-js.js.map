{"version":3,"sources":["../../../src/external-assets/js/external-js.js"],"names":["ExternalJs","session","sessionPointer","scriptSources","forEach","scriptSrc","addScript","Object","keys","parentScriptSrc","onload","childScriptSrc","push","scriptPointer","scriptElement","document","createElement","setAttribute","body","appendChild","ownScriptPointer","getElementById","remove"],"mappings":"gGAAA,uE,mhCAEaA,CAAAA,U,yBACT,qBAAc,kCACV,KAAKC,OAAL,CAAe,EAAf,CACA,KAAKC,cAAL,CAAsB,CACzB,C,wDAEqB,gBAClB,EAAE,KAAKA,cAAP,CACA,KAAKD,OAAL,CAAa,KAAKC,cAAlB,EAAoC,EAApC,CAFkB,8BAAfC,aAAe,0CAAfA,aAAe,uBAIlBA,aAAa,CAACC,OAAd,CAAsB,SAAAC,SAAS,CAAI,CAC/B,GAAI,MAAOA,CAAAA,SAAP,GAAqB,QAAzB,CAAmC,CAC/B,KAAI,CAACC,SAAL,CAAeD,SAAf,CACH,CAFD,IAEO,IAAI,QAAOA,SAAP,IAAqB,QAAzB,CAAmC,CACtCE,MAAM,CAACC,IAAP,CAAYH,SAAZ,EAAuBD,OAAvB,CAA+B,SAAAK,eAAe,CAAI,CAC9C,KAAI,CAACH,SAAL,CAAeG,eAAf,EAAgCC,MAAhC,CAAyC,UAAM,CAC3CL,SAAS,CAACI,eAAD,CAAT,CAA2BL,OAA3B,CAAmC,SAAAO,cAAc,CAAI,CACjD,KAAI,CAACL,SAAL,CAAeK,cAAf,CACH,CAFD,CAGH,CACJ,CAND,CAOH,CACJ,CAZD,EAcA,MAAO,MAAKT,cACf,C,4CAESG,S,CAAW,CACjB,KAAKJ,OAAL,CAAa,KAAKC,cAAlB,EAAkCU,IAAlC,6BAAyCC,yBAAzC,4EAEA,GAAMC,CAAAA,aAAa,CAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAtB,CACAF,aAAa,CAACG,YAAd,CAA2B,IAA3B,CAAiC,SAAWJ,yBAA5C,EACAC,aAAa,CAACG,YAAd,CAA2B,KAA3B,CAAkCZ,SAAlC,EACAU,QAAQ,CAACG,IAAT,CAAcC,WAAd,CAA0BL,aAA1B,EACA,MAAOA,CAAAA,aACV,C,sCAEMZ,c,CAAgB,CACnB,GAAI,EAAEA,cAAc,GAAI,MAAKD,OAAzB,CAAJ,CAAuC,OACvC,KAAKA,OAAL,CAAaC,cAAb,EAA6BE,OAA7B,CAAqC,SAAAgB,gBAAgB,CAAI,CACrDL,QAAQ,CAACM,cAAT,CAAwB,SAAWD,gBAAnC,EAAqDE,MAArD,EACH,CAFD,EAGA,MAAO,MAAKrB,OAAL,CAAaC,cAAb,CACV,C","sourcesContent":["import scriptPointer from './script-pointer'\r\n\r\nexport class ExternalJs {\r\n    constructor() {\r\n        this.session = {}\r\n        this.sessionPointer = 0\r\n    }\r\n\r\n    add(...scriptSources) {\r\n        ++this.sessionPointer\r\n        this.session[this.sessionPointer] = []\r\n\r\n        scriptSources.forEach(scriptSrc => {\r\n            if (typeof scriptSrc === 'string') {\r\n                this.addScript(scriptSrc)\r\n            } else if (typeof scriptSrc === 'object') {\r\n                Object.keys(scriptSrc).forEach(parentScriptSrc => {\r\n                    this.addScript(parentScriptSrc).onload = () => {\r\n                        scriptSrc[parentScriptSrc].forEach(childScriptSrc => {\r\n                            this.addScript(childScriptSrc)\r\n                        })\r\n                    }\r\n                })\r\n            }\r\n        })\r\n\r\n        return this.sessionPointer\r\n    }\r\n\r\n    addScript(scriptSrc) {\r\n        this.session[this.sessionPointer].push(++scriptPointer)\r\n\r\n        const scriptElement = document.createElement('script')\r\n        scriptElement.setAttribute('id', 'script' + scriptPointer)\r\n        scriptElement.setAttribute('src', scriptSrc)\r\n        document.body.appendChild(scriptElement)\r\n        return scriptElement\r\n    }\r\n\r\n    remove(sessionPointer) {\r\n        if (!(sessionPointer in this.session)) return\r\n        this.session[sessionPointer].forEach(ownScriptPointer => {\r\n            document.getElementById('script' + ownScriptPointer).remove()\r\n        })\r\n        delete this.session[sessionPointer]\r\n    }\r\n}\r\n"],"file":"external-js.js"}