{"version":3,"sources":["../../../src/external-assets/js/external-js.js"],"names":["scriptPointer","ExternalJs","constructor","session","sessionPointer","add","scriptSources","forEach","scriptSrc","addScript","Object","keys","parentScriptSrc","onload","childScriptSrc","push","scriptElement","document","createElement","setAttribute","body","appendChild","remove","ownScriptPointer","getElementById"],"mappings":"AAAA,MAAOA,CAAAA,aAAP,KAA0B,kBAA1B,CAEA,cAAe,MAAMC,CAAAA,UAAW,CAC5BC,WAAW,EAAG,CACV,KAAKC,OAAL,CAAe,EAAf,CACA,KAAKC,cAAL,CAAsB,CACzB,CAEDC,GAAG,CAAC,GAAGC,aAAJ,CAAmB,CAClB,EAAE,KAAKF,cAAP,CACA,KAAKD,OAAL,CAAa,KAAKC,cAAlB,EAAoC,EAApC,CAEAE,aAAa,CAACC,OAAd,CAAsBC,SAAS,EAAI,CAC/B,GAAI,MAAOA,CAAAA,SAAP,GAAqB,QAAzB,CAAmC,CAC/B,KAAKC,SAAL,CAAeD,SAAf,CACH,CAFD,IAEO,IAAI,MAAOA,CAAAA,SAAP,GAAqB,QAAzB,CAAmC,CACtCE,MAAM,CAACC,IAAP,CAAYH,SAAZ,EAAuBD,OAAvB,CAA+BK,eAAe,EAAI,CAC9C,KAAKH,SAAL,CAAeG,eAAf,EAAgCC,MAAhC,CAAyC,IAAM,CAC3CL,SAAS,CAACI,eAAD,CAAT,CAA2BL,OAA3B,CAAmCO,cAAc,EAAI,CACjD,KAAKL,SAAL,CAAeK,cAAf,CACH,CAFD,CAGH,CACJ,CAND,CAOH,CACJ,CAZD,EAcA,MAAO,MAAKV,cACf,CAEDK,SAAS,CAACD,SAAD,CAAY,CACjB,KAAKL,OAAL,CAAa,KAAKC,cAAlB,EAAkCW,IAAlC,CAAuC,EAAEf,aAAzC,EAEA,KAAMgB,CAAAA,aAAa,CAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAtB,CACAF,aAAa,CAACG,YAAd,CAA2B,IAA3B,CAAiC,SAAWnB,aAA5C,EACAgB,aAAa,CAACG,YAAd,CAA2B,KAA3B,CAAkCX,SAAlC,EACAS,QAAQ,CAACG,IAAT,CAAcC,WAAd,CAA0BL,aAA1B,EACA,MAAOA,CAAAA,aACV,CAEDM,MAAM,CAAClB,cAAD,CAAiB,CACnB,GAAI,EAAEA,cAAc,GAAI,MAAKD,OAAzB,CAAJ,CAAuC,OACvC,KAAKA,OAAL,CAAaC,cAAb,EAA6BG,OAA7B,CAAqCgB,gBAAgB,EAAI,CACrDN,QAAQ,CAACO,cAAT,CAAwB,SAAWD,gBAAnC,EAAqDD,MAArD,EACH,CAFD,EAGA,MAAO,MAAKnB,OAAL,CAAaC,cAAb,CACV,CA3C2B","sourcesContent":["import scriptPointer from './script-pointer'\r\n\r\nexport default class ExternalJs {\r\n    constructor() {\r\n        this.session = {}\r\n        this.sessionPointer = 0\r\n    }\r\n\r\n    add(...scriptSources) {\r\n        ++this.sessionPointer\r\n        this.session[this.sessionPointer] = []\r\n\r\n        scriptSources.forEach(scriptSrc => {\r\n            if (typeof scriptSrc === 'string') {\r\n                this.addScript(scriptSrc)\r\n            } else if (typeof scriptSrc === 'object') {\r\n                Object.keys(scriptSrc).forEach(parentScriptSrc => {\r\n                    this.addScript(parentScriptSrc).onload = () => {\r\n                        scriptSrc[parentScriptSrc].forEach(childScriptSrc => {\r\n                            this.addScript(childScriptSrc)\r\n                        })\r\n                    }\r\n                })\r\n            }\r\n        })\r\n\r\n        return this.sessionPointer\r\n    }\r\n\r\n    addScript(scriptSrc) {\r\n        this.session[this.sessionPointer].push(++scriptPointer)\r\n\r\n        const scriptElement = document.createElement('script')\r\n        scriptElement.setAttribute('id', 'script' + scriptPointer)\r\n        scriptElement.setAttribute('src', scriptSrc)\r\n        document.body.appendChild(scriptElement)\r\n        return scriptElement\r\n    }\r\n\r\n    remove(sessionPointer) {\r\n        if (!(sessionPointer in this.session)) return\r\n        this.session[sessionPointer].forEach(ownScriptPointer => {\r\n            document.getElementById('script' + ownScriptPointer).remove()\r\n        })\r\n        delete this.session[sessionPointer]\r\n    }\r\n}\r\n"],"file":"external-js.js"}