{"version":3,"sources":["../src/server-clock.js"],"names":["ServerClock","constructor","clockBlockKeys","clockBlockRange","setClock","clock","d","localClock","Math","floor","Date","getTime","block","blockKey","callback","key","length"],"mappings":"AAAA,cAAe,MAAMA,CAAAA,WAAY,CAC7BC,WAAW,CAACC,cAAD,CAAiBC,eAAjB,CAAkC,CACzC,KAAKD,cAAL,CAAsBA,cAAtB,CACA,KAAKC,eAAL,CAAuBA,eAC1B,CAEDC,QAAQ,CAACC,KAAD,CAAQ,CACZ,KAAKC,CAAL,CAAS,KAAKC,UAAL,GAAoBF,KAChC,CAEDE,UAAU,EAAG,CACT,MAAOC,CAAAA,IAAI,CAACC,KAAL,CAAY,GAAIC,CAAAA,IAAJ,EAAD,CAAaC,OAAb,GAAyB,IAApC,CACV,CAEDN,KAAK,EAAG,CACJ,MAAO,MAAKE,UAAL,GAAoB,KAAKD,CACnC,CAEDM,KAAK,EAAG,CACJ,MAAOJ,CAAAA,IAAI,CAACC,KAAL,CAAW,KAAKJ,KAAL,GAAe,KAAKF,eAA/B,CACV,CAEDU,QAAQ,CAACC,QAAQ,CAAG,IAAZ,CAAkB,CACtB,KAAMC,CAAAA,GAAG,CAAG,KAAKb,cAAL,CAAoB,KAAKU,KAAL,GAAe,KAAKV,cAAL,CAAoBc,MAAvD,CAAZ,CACA,MAAOF,CAAAA,QAAQ,CAAGA,QAAQ,CAACC,GAAD,CAAX,CAAmBA,GACrC,CAzB4B","sourcesContent":["export default class ServerClock {\r\n    constructor(clockBlockKeys, clockBlockRange) {\r\n        this.clockBlockKeys = clockBlockKeys\r\n        this.clockBlockRange = clockBlockRange\r\n    }\r\n\r\n    setClock(clock) {\r\n        this.d = this.localClock() - clock\r\n    }\r\n\r\n    localClock() {\r\n        return Math.floor((new Date()).getTime() / 1000)\r\n    }\r\n\r\n    clock() {\r\n        return this.localClock() - this.d\r\n    }\r\n\r\n    block() {\r\n        return Math.floor(this.clock() / this.clockBlockRange)\r\n    }\r\n\r\n    blockKey(callback = null) {\r\n        const key = this.clockBlockKeys[this.block() % this.clockBlockKeys.length]\r\n        return callback ? callback(key) : key\r\n    }\r\n}\r\n\r\n"],"file":"server-clock.js"}