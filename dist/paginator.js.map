{"version":3,"sources":["../src/paginator.js"],"names":["Paginator","itemsPerPageList","storeHandler","maxPageShowed","pagination","itemsPerPage","current","first","last","atFirst","atLast","prev","next","pages","from","to","items","totalItems","restoreItemsPerPage","parseInt","current_page","last_page","pivot","Math","round","distance","floor","pageTo","pageFrom","per_page","total","queryParams","page","items_per_page","indexOf","storeItemsPerPage","get","set","toString"],"mappings":"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","sourcesContent":["export class Paginator {\r\n    constructor(itemsPerPageList, storeHandler, maxPageShowed = 5) {\r\n        this.itemsPerPageList = itemsPerPageList\r\n        this.maxPageShowed = maxPageShowed\r\n        this.pagination = {\r\n            itemsPerPage: this.itemsPerPageList[0],\r\n            current: 1,\r\n            first: 1,\r\n            last: 1,\r\n            atFirst: true,\r\n            atLast: true,\r\n            prev: 1,\r\n            next: 1,\r\n            pages: {\r\n                from: 1,\r\n                to: 1,\r\n            },\r\n            items: {\r\n                from: 0,\r\n                to: 0,\r\n            },\r\n            totalItems: 0,\r\n        }\r\n        this.storeHandler = storeHandler\r\n        this.restoreItemsPerPage()\r\n    }\r\n\r\n    parsePagination(pagination) {\r\n        if (pagination) {\r\n            const current = parseInt(pagination.current_page)\r\n            const last = parseInt(pagination.last_page)\r\n            const first = 1\r\n            const atLast = current === last\r\n            const atFirst = current === first\r\n            const pivot = Math.round(this.maxPageShowed / 2)\r\n            const distance = Math.floor(this.maxPageShowed / 2)\r\n            const pageTo = current < pivot ? (last > this.maxPageShowed ? this.maxPageShowed : last) : (current < last - distance ? current + distance : last)\r\n            const pageFrom = pageTo - this.maxPageShowed + first\r\n            this.pagination = {\r\n                itemsPerPage: parseInt(pagination.per_page),\r\n                current: current,\r\n                first: first,\r\n                last: last,\r\n                atFirst: atFirst,\r\n                atLast: atLast,\r\n                prev: atFirst ? 1 : current - 1,\r\n                next: atLast ? last : current + 1,\r\n                pages: {\r\n                    from: pageFrom < first ? first : pageFrom,\r\n                    to: pageTo,\r\n                },\r\n                items: {\r\n                    from: parseInt(pagination.from),\r\n                    to: parseInt(pagination.to),\r\n                },\r\n                totalItems: parseInt(pagination.total),\r\n            }\r\n        }\r\n        return this\r\n    }\r\n\r\n    parseQuery(queryParams) {\r\n        this.pagination.current = parseInt(queryParams.page) | 0\r\n        if (this.pagination.current < 1) this.pagination.current = 1\r\n\r\n        const itemsPerPage = parseInt(queryParams.items_per_page) | 0\r\n        if (this.itemsPerPageList.indexOf(itemsPerPage) !== -1) {\r\n            this.pagination.itemsPerPage = itemsPerPage\r\n            this.storeItemsPerPage()\r\n        }\r\n\r\n        return this\r\n    }\r\n\r\n    restoreItemsPerPage() {\r\n        this.pagination.itemsPerPage = parseInt(this.storeHandler.get('items_per_page', '0')) | 0\r\n        if (this.itemsPerPageList.indexOf(this.pagination.itemsPerPage) === -1) {\r\n            this.pagination.itemsPerPage = this.itemsPerPageList[0]\r\n            this.storeItemsPerPage()\r\n        }\r\n    }\r\n\r\n    storeItemsPerPage() {\r\n        this.storeHandler.set('items_per_page', this.pagination.itemsPerPage.toString())\r\n    }\r\n\r\n    setPage(page) {\r\n        this.pagination.current = page\r\n    }\r\n\r\n    setItemsPerPage(itemsPerPage) {\r\n        this.pagination.itemsPerPage = itemsPerPage\r\n        this.storeItemsPerPage()\r\n    }\r\n}\r\n"],"file":"paginator.js"}