{"version":3,"sources":["../src/callback-waiter.js"],"names":["CallbackWaiter","waiters","id","callback","time","replaceCallback"],"mappings":"2tBAAaA,CAAAA,c,yBACT,yBAAc,sCACV,KAAKC,OAAL,CAAe,EAClB,C,+CAED,cAAKC,EAAL,CAASC,QAAT,CAAsD,IAAnCC,CAAAA,IAAmC,2DAA5B,EAA4B,IAAxBC,CAAAA,eAAwB,2DAAN,IAAM,CAClD,GAAI,EAAEH,EAAE,GAAI,MAAKD,OAAb,CAAJ,CAA2B,CACvB,KAAKA,OAAL,CAAaC,EAAb,EAAmB,CACfC,QAAQ,CAAEA,QADK,CAEfC,IAAI,CAAEA,IAFS,CAGfC,eAAe,CAAEA,eAHF,CAKtB,CACD,GAAI,KAAKJ,OAAL,CAAaC,EAAb,EAAiBE,IAAjB,GAA0BA,IAA9B,CAAoC,CAChCD,QAAQ,EACX,CAFD,IAEO,CACHE,eAAe,EAAIA,eAAe,EACrC,CACD,GAAI,EAAE,KAAKJ,OAAL,CAAaC,EAAb,EAAiBE,IAAnB,GAA4B,CAAhC,CAAmC,CAC/B,MAAO,MAAKH,OAAL,CAAaC,EAAb,CACV,CACJ,C,sBAED,gBAAOA,EAAP,CAAW,CACP,MAAO,MAAKD,OAAL,CAAaC,EAAb,CACV,C","sourcesContent":["export class CallbackWaiter {\r\n    constructor() {\r\n        this.waiters = {}\r\n    }\r\n\r\n    call(id, callback, time = 10, replaceCallback = null) {\r\n        if (!(id in this.waiters)) {\r\n            this.waiters[id] = {\r\n                callback: callback,\r\n                time: time,\r\n                replaceCallback: replaceCallback,\r\n            }\r\n        }\r\n        if (this.waiters[id].time === time) {\r\n            callback()\r\n        } else {\r\n            replaceCallback && replaceCallback()\r\n        }\r\n        if (--this.waiters[id].time === 0) {\r\n            delete this.waiters[id]\r\n        }\r\n    }\r\n\r\n    remove(id) {\r\n        delete this.waiters[id]\r\n    }\r\n}\r\n\r\n"],"file":"callback-waiter.js"}