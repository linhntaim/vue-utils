{"version":3,"sources":["../src/callback-waiter.js"],"names":["CallbackWaiter","constructor","waiters","call","id","callback","time","replaceCallback","remove"],"mappings":"AAAA,MAAO,MAAMA,CAAAA,cAAe,CACxBC,WAAW,EAAG,CACV,KAAKC,OAAL,CAAe,EAClB,CAEDC,IAAI,CAACC,EAAD,CAAKC,QAAL,CAAeC,IAAI,CAAG,EAAtB,CAA0BC,eAAe,CAAG,IAA5C,CAAkD,CAClD,GAAI,EAAEH,EAAE,GAAI,MAAKF,OAAb,CAAJ,CAA2B,CACvB,KAAKA,OAAL,CAAaE,EAAb,EAAmB,CACfC,QAAQ,CAAEA,QADK,CAEfC,IAAI,CAAEA,IAFS,CAGfC,eAAe,CAAEA,eAHF,CAKtB,CACD,GAAI,KAAKL,OAAL,CAAaE,EAAb,EAAiBE,IAAjB,GAA0BA,IAA9B,CAAoC,CAChCD,QAAQ,EACX,CAFD,IAEO,CACHE,eAAe,EAAIA,eAAe,EACrC,CACD,GAAI,EAAE,KAAKL,OAAL,CAAaE,EAAb,EAAiBE,IAAnB,GAA4B,CAAhC,CAAmC,CAC/B,MAAO,MAAKJ,OAAL,CAAaE,EAAb,CACV,CACJ,CAEDI,MAAM,CAACJ,EAAD,CAAK,CACP,MAAO,MAAKF,OAAL,CAAaE,EAAb,CACV,CAzBuB","sourcesContent":["export class CallbackWaiter {\r\n    constructor() {\r\n        this.waiters = {}\r\n    }\r\n\r\n    call(id, callback, time = 10, replaceCallback = null) {\r\n        if (!(id in this.waiters)) {\r\n            this.waiters[id] = {\r\n                callback: callback,\r\n                time: time,\r\n                replaceCallback: replaceCallback,\r\n            }\r\n        }\r\n        if (this.waiters[id].time === time) {\r\n            callback()\r\n        } else {\r\n            replaceCallback && replaceCallback()\r\n        }\r\n        if (--this.waiters[id].time === 0) {\r\n            delete this.waiters[id]\r\n        }\r\n    }\r\n\r\n    remove(id) {\r\n        delete this.waiters[id]\r\n    }\r\n}\r\n\r\n"],"file":"callback-waiter.js"}