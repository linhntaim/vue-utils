{"version":3,"sources":["../../../src/cookie/cookie-stores/passport-cookie-store.js"],"names":["CookieStore","PassportCookieStore","convert","rawPassport","accessToken","access_token","tokenType","token_type","refreshToken","refresh_token","tokenEndTime","Date","getTime","expires_in","retrieve","disabled","passport","parseInt","token_end_time","def","store"],"mappings":"AAAA,MAAOA,CAAAA,WAAP,KAAwB,gBAAxB,CAEA,cAAe,MAAMC,CAAAA,mBAAN,QAAkCD,CAAAA,WAAY,CACzDE,OAAO,CAACC,WAAD,CAAc,CACjB,MAAO,CACHC,WAAW,CAAED,WAAW,CAACE,YADtB,CAEHC,SAAS,CAAEH,WAAW,CAACI,UAFpB,CAGHC,YAAY,CAAEL,WAAW,CAACM,aAHvB,CAIHC,YAAY,CAAG,GAAIC,CAAAA,IAAJ,EAAD,CAAWC,OAAX,GAAuBT,WAAW,CAACU,UAAZ,CAAyB,IAJ3D,CAMV,CAEDC,QAAQ,EAAG,CACP,GAAI,KAAKC,QAAT,CAAmB,MAAO,KAAP,CAEnB,KAAMC,CAAAA,QAAQ,CAAG,MAAMF,QAAN,EAAjB,CACA,MAAOE,CAAAA,QAAQ,CAAG,CACdZ,WAAW,CAAEY,QAAQ,CAACX,YADR,CAEdC,SAAS,CAAEU,QAAQ,CAACT,UAFN,CAGdC,YAAY,CAAEQ,QAAQ,CAACP,aAHT,CAIdC,YAAY,CAAEO,QAAQ,CAACD,QAAQ,CAACE,cAAV,CAJR,CAAH,CAKX,KAAKC,GACZ,CAEDC,KAAK,CAACJ,QAAD,CAAW,CACZ,GAAI,KAAKD,QAAT,CAAmB,MAAO,KAAP,CAEnB,MAAO,OAAMK,KAAN,CAAY,CACff,YAAY,CAAEW,QAAQ,CAACZ,WADR,CAEfG,UAAU,CAAES,QAAQ,CAACV,SAFN,CAGfG,aAAa,CAAEO,QAAQ,CAACR,YAHT,CAIfU,cAAc,CAAEF,QAAQ,CAACN,YAJV,CAAZ,CAKJ,GAAIC,CAAAA,IAAJ,CAASK,QAAQ,CAACN,YAAlB,CALI,CAMV,CA/BwD","sourcesContent":["import CookieStore from './cookie-store'\r\n\r\nexport default class PassportCookieStore extends CookieStore {\r\n    convert(rawPassport) {\r\n        return {\r\n            accessToken: rawPassport.access_token,\r\n            tokenType: rawPassport.token_type,\r\n            refreshToken: rawPassport.refresh_token,\r\n            tokenEndTime: (new Date).getTime() + rawPassport.expires_in * 1000,\r\n        }\r\n    }\r\n\r\n    retrieve() {\r\n        if (this.disabled) return null\r\n\r\n        const passport = super.retrieve()\r\n        return passport ? {\r\n            accessToken: passport.access_token,\r\n            tokenType: passport.token_type,\r\n            refreshToken: passport.refresh_token,\r\n            tokenEndTime: parseInt(passport.token_end_time),\r\n        } : this.def\r\n    }\r\n\r\n    store(passport) {\r\n        if (this.disabled) return null\r\n\r\n        return super.store({\r\n            access_token: passport.accessToken,\r\n            token_type: passport.tokenType,\r\n            refresh_token: passport.refreshToken,\r\n            token_end_time: passport.tokenEndTime,\r\n        }, new Date(passport.tokenEndTime))\r\n    }\r\n}\r\n"],"file":"passport-cookie-store.js"}