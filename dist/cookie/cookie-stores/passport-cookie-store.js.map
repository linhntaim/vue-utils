{"version":3,"sources":["../../../src/cookie/cookie-stores/passport-cookie-store.js"],"names":["PassportCookieStore","rawPassport","accessToken","access_token","tokenType","token_type","refreshToken","refresh_token","tokenEndTime","Date","getTime","expires_in","disabled","passport","parseInt","token_end_time","def","CookieStore"],"mappings":"yGAAA,2C,gnGAEaA,CAAAA,mB,mTACDC,W,CAAa,CACjB,MAAO,CACHC,WAAW,CAAED,WAAW,CAACE,YADtB,CAEHC,SAAS,CAAEH,WAAW,CAACI,UAFpB,CAGHC,YAAY,CAAEL,WAAW,CAACM,aAHvB,CAIHC,YAAY,CAAG,GAAIC,CAAAA,IAAJ,EAAD,CAAWC,OAAX,GAAuBT,WAAW,CAACU,UAAZ,CAAyB,IAJ3D,CAMV,C,2CAEU,CACP,GAAI,KAAKC,QAAT,CAAmB,MAAO,KAAP,CAEnB,GAAMC,CAAAA,QAAQ,gFAAd,CACA,MAAOA,CAAAA,QAAQ,CAAG,CACdX,WAAW,CAAEW,QAAQ,CAACV,YADR,CAEdC,SAAS,CAAES,QAAQ,CAACR,UAFN,CAGdC,YAAY,CAAEO,QAAQ,CAACN,aAHT,CAIdC,YAAY,CAAEM,QAAQ,CAACD,QAAQ,CAACE,cAAV,CAJR,CAAH,CAKX,KAAKC,GACZ,C,oCAEKH,Q,CAAU,CACZ,GAAI,KAAKD,QAAT,CAAmB,MAAO,KAAP,CAEnB,mFAAmB,CACfT,YAAY,CAAEU,QAAQ,CAACX,WADR,CAEfG,UAAU,CAAEQ,QAAQ,CAACT,SAFN,CAGfG,aAAa,CAAEM,QAAQ,CAACP,YAHT,CAIfS,cAAc,CAAEF,QAAQ,CAACL,YAJV,CAAnB,CAKG,GAAIC,CAAAA,IAAJ,CAASI,QAAQ,CAACL,YAAlB,CALH,CAMH,C,gCA/BoCS,wB","sourcesContent":["import {CookieStore} from './cookie-store'\r\n\r\nexport class PassportCookieStore extends CookieStore {\r\n    convert(rawPassport) {\r\n        return {\r\n            accessToken: rawPassport.access_token,\r\n            tokenType: rawPassport.token_type,\r\n            refreshToken: rawPassport.refresh_token,\r\n            tokenEndTime: (new Date).getTime() + rawPassport.expires_in * 1000,\r\n        }\r\n    }\r\n\r\n    retrieve() {\r\n        if (this.disabled) return null\r\n\r\n        const passport = super.retrieve()\r\n        return passport ? {\r\n            accessToken: passport.access_token,\r\n            tokenType: passport.token_type,\r\n            refreshToken: passport.refresh_token,\r\n            tokenEndTime: parseInt(passport.token_end_time),\r\n        } : this.def\r\n    }\r\n\r\n    store(passport) {\r\n        if (this.disabled) return null\r\n\r\n        return super.store({\r\n            access_token: passport.accessToken,\r\n            token_type: passport.tokenType,\r\n            refresh_token: passport.refreshToken,\r\n            token_end_time: passport.tokenEndTime,\r\n        }, new Date(passport.tokenEndTime))\r\n    }\r\n}\r\n"],"file":"passport-cookie-store.js"}