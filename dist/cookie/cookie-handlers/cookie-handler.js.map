{"version":3,"sources":["../../../src/cookie/cookie-handlers/cookie-handler.js"],"names":["CookieHandler","crypto","settings","data","encryptJson","secret","encryptedData","decryptJson","name","expires","path","domain","sameSite","setRaw","encrypt","decrypt","getRaw","names","removeRaw","window","location","protocol"],"mappings":"0tBAAaA,CAAAA,a,yBACT,uBAAYC,MAAZ,CAAoBC,QAApB,CAA8B,qCAC1B,KAAKD,MAAL,CAAcA,MAAd,CACA,KAAKC,QAAL,CAAgBA,QACnB,C,kEAEOC,I,CAAM,CACV,MAAO,MAAKF,MAAL,CAAYG,WAAZ,CAAwBD,IAAxB,CAA8B,KAAKD,QAAL,CAAcG,MAA5C,CACV,C,wCAEOC,a,CAAe,CACnB,MAAOA,CAAAA,aAAa,CAChB,KAAKL,MAAL,CAAYM,WAAZ,CAAwBD,aAAxB,CAAuC,KAAKJ,QAAL,CAAcG,MAArD,CADgB,CAC+C,IACtE,CAED;;;;;;;;uCASIG,I,CAAML,I,CAAmE,IAA7DM,CAAAA,OAA6D,2DAAnD,IAAmD,IAA7CC,CAAAA,IAA6C,2DAAtC,GAAsC,IAAjCC,CAAAA,MAAiC,2DAAxB,IAAwB,IAAlBC,CAAAA,QAAkB,2DAAP,KAAO,CACzE,KAAKC,MAAL,CACIL,IADJ,CAEI,KAAKM,OAAL,CAAaX,IAAb,CAFJ,CAGI,KAAKM,OAAL,CAAaA,OAAb,CAHJ,CAII,KAAKC,IAAL,CAAUA,IAAV,CAJJ,CAKI,KAAKC,MAAL,CAAYA,MAAZ,CALJ,CAMI,KAAKC,QAAL,CAAcA,QAAd,CANJ,CAQH,CAED;;;;;;;;6CASOJ,I,CAAML,I,CAAmE,IAA7DM,CAAAA,OAA6D,2DAAnD,IAAmD,IAA7CC,CAAAA,IAA6C,2DAAtC,GAAsC,IAAjCC,CAAAA,MAAiC,2DAAxB,IAAwB,IAAlBC,CAAAA,QAAkB,2DAAP,KAExE,C,gCAEGJ,I,CAAM,CACN,MAAO,MAAKO,OAAL,CAAa,KAAKC,MAAL,CAAYR,IAAZ,CAAb,CACV,C,sCAEMA,I,CAAM,CACT,MAAO,KACV,C,sCAEMS,K,CAAkC,IAA3BP,CAAAA,IAA2B,2DAApB,GAAoB,IAAfC,CAAAA,MAAe,2DAAN,IAAM,CACrC,KAAKO,SAAL,CAAeD,KAAf,CAAsB,KAAKP,IAAL,CAAUA,IAAV,CAAtB,CAAuC,KAAKC,MAAL,CAAYA,MAAZ,CAAvC,CACH,C,4CAESM,K,CAAkC,IAA3BP,CAAAA,IAA2B,2DAApB,GAAoB,IAAfC,CAAAA,MAAe,2DAAN,IAErC,CAED;;;;gDAKwB,IAAhBF,CAAAA,QAAgB,2DAAN,IAAM,CACpB,GAAI,CAACA,QAAL,CAAcA,QAAO,CAAG,KAAKP,QAAL,CAAcO,OAAxB,CACd,MAAO,OAAOA,CAAAA,QAAP,GAAmB,UAAnB,CAAgCA,QAAO,EAAvC,CAA6CA,QAAO,CAAGA,QAAH,CAAa,IAC3E,C,mCAEgB,IAAZC,CAAAA,KAAY,2DAAL,GAAK,CACb,MAAOA,CAAAA,KAAI,CAAGA,KAAH,CAAU,KAAKR,QAAL,CAAcQ,IACtC,C,uCAEqB,IAAfC,CAAAA,OAAe,2DAAN,IAAM,CAClB,MAAOA,CAAAA,OAAM,CAAGA,OAAH,CAAY,KAAKT,QAAL,CAAcS,MAC1C,C,2CAE0B,IAAlBC,CAAAA,SAAkB,2DAAP,KAAO,CACvB,MAAOA,CAAAA,SAAQ,CAAGA,SAAH,CAAc,KAAKV,QAAL,CAAcU,QAC9C,C,uCAEQ,CACL,MAAOO,CAAAA,MAAM,CAACC,QAAP,CAAgBC,QAAhB,GAA6B,OACvC,C","sourcesContent":["export class CookieHandler {\r\n    constructor(crypto, settings) {\r\n        this.crypto = crypto\r\n        this.settings = settings\r\n    }\r\n\r\n    encrypt(data) {\r\n        return this.crypto.encryptJson(data, this.settings.secret)\r\n    }\r\n\r\n    decrypt(encryptedData) {\r\n        return encryptedData ?\r\n            this.crypto.decryptJson(encryptedData, this.settings.secret) : null\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {String} name\r\n     * @param {Object|String} data\r\n     * @param {Date|Function|null} expires\r\n     * @param {String} path\r\n     * @param {String|null} domain\r\n     * @param {String} sameSite\r\n     */\r\n    set(name, data, expires = null, path = '/', domain = null, sameSite = 'lax') {\r\n        this.setRaw(\r\n            name,\r\n            this.encrypt(data),\r\n            this.expires(expires),\r\n            this.path(path),\r\n            this.domain(domain),\r\n            this.sameSite(sameSite),\r\n        )\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {String} name\r\n     * @param {String} data\r\n     * @param {Date|null} expires\r\n     * @param {String} path\r\n     * @param {String|null} domain\r\n     * @param {String} sameSite\r\n     */\r\n    setRaw(name, data, expires = null, path = '/', domain = null, sameSite = 'lax') {\r\n\r\n    }\r\n\r\n    get(name) {\r\n        return this.decrypt(this.getRaw(name))\r\n    }\r\n\r\n    getRaw(name) {\r\n        return null\r\n    }\r\n\r\n    remove(names, path = '/', domain = null) {\r\n        this.removeRaw(names, this.path(path), this.domain(domain))\r\n    }\r\n\r\n    removeRaw(names, path = '/', domain = null) {\r\n\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {Date|Function|null} expires\r\n     * @returns {Date|null}\r\n     */\r\n    expires(expires = null) {\r\n        if (!expires) expires = this.settings.expires\r\n        return typeof expires === 'function' ? expires() : (expires ? expires : null)\r\n    }\r\n\r\n    path(path = '/') {\r\n        return path ? path : this.settings.path\r\n    }\r\n\r\n    domain(domain = null) {\r\n        return domain ? domain : this.settings.domain\r\n    }\r\n\r\n    sameSite(sameSite = 'lax') {\r\n        return sameSite ? sameSite : this.settings.sameSite\r\n    }\r\n\r\n    secure() {\r\n        return window.location.protocol === 'https'\r\n    }\r\n}\r\n\r\n\r\n"],"file":"cookie-handler.js"}