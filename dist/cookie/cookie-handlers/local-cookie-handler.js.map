{"version":3,"sources":["../../../src/cookie/cookie-handlers/local-cookie-handler.js"],"names":["LocalCookieHandler","crypto","settings","localCacheHandler","LocalCacheHandler","name","data","expires","path","domain","sameSite","Date","set","toString","get","remove","window","location","pathname","indexOf","names","i","CookieHandler"],"mappings":"wGAAA,+CACA,kC,8kFAEaA,CAAAA,kB,gIACT,4BAAYC,MAAZ,CAAoBC,QAApB,CAA8B,oDAC1B,uBAAMD,MAAN,CAAcC,QAAd,EAEA,MAAKC,iBAAL,CAAyB,GAAIC,yBAA7B,CAH0B,YAI7B,C,qEAEMC,I,CAAMC,I,CAAmE,IAA7DC,CAAAA,OAA6D,2DAAnD,IAAmD,IAA7CC,CAAAA,IAA6C,2DAAtC,GAAsC,IAAjCC,CAAAA,MAAiC,2DAAxB,IAAwB,IAAlBC,CAAAA,QAAkB,2DAAP,KAAO,CAC5E,GAAIH,OAAJ,CAAa,CACT,GAAIA,OAAO,EAAI,GAAII,CAAAA,IAAnB,CAA2B,CACvB,MACH,CACD,KAAKR,iBAAL,CAAuBS,GAAvB,CAA2BP,IAAI,CAAG,YAAlC,CAAgDE,OAAO,CAACM,QAAR,EAAhD,CACH,CACD,KAAKV,iBAAL,CAAuBS,GAAvB,CAA2BP,IAAI,CAAG,SAAlC,CAA6CG,IAA7C,EACA,KAAKL,iBAAL,CAAuBS,GAAvB,CAA2BP,IAA3B,CAAiCC,IAAjC,CACH,C,sCAEMD,I,CAAM,CACT,GAAME,CAAAA,OAAO,CAAG,KAAKJ,iBAAL,CAAuBW,GAAvB,CAA2BT,IAAI,CAAG,YAAlC,CAAhB,CACA,GAAIE,OAAO,EAAI,GAAII,CAAAA,IAAJ,CAASJ,OAAT,GAAqB,GAAII,CAAAA,IAAxC,CAAgD,CAC5C,KAAKI,MAAL,CAAY,CACRV,IAAI,CAAG,YADC,CAERA,IAAI,CAAG,SAFC,CAGRA,IAHQ,CAAZ,EAKA,MAAO,KACV,CACD,GAAMG,CAAAA,IAAI,CAAG,KAAKL,iBAAL,CAAuBW,GAAvB,CAA2BT,IAAI,CAAG,SAAlC,CAAb,CACA,GAAIW,MAAM,CAACC,QAAP,CAAgBC,QAAhB,CAAyBC,OAAzB,CAAiCX,IAAjC,IAA2C,CAA/C,CAAkD,CAC9C,MAAO,KACV,CACD,MAAO,MAAKL,iBAAL,CAAuBW,GAAvB,CAA2BT,IAA3B,CACV,C,sCAEMe,K,CAAkC,IAA3BZ,CAAAA,IAA2B,2DAApB,GAAoB,IAAfC,CAAAA,MAAe,2DAAN,IAAM,CACrC,IAAK,GAAMY,CAAAA,CAAX,GAAgBD,CAAAA,KAAhB,CAAuB,CACnB,KAAKjB,iBAAL,CAAuBY,MAAvB,CAA8BK,KAAK,CAACC,CAAD,CAAnC,CACH,CACJ,C,+BAvCmCC,4B","sourcesContent":["import {CookieHandler} from './cookie-handler'\r\nimport {LocalCacheHandler} from '../../cache'\r\n\r\nexport class LocalCookieHandler extends CookieHandler {\r\n    constructor(crypto, settings) {\r\n        super(crypto, settings)\r\n\r\n        this.localCacheHandler = new LocalCacheHandler()\r\n    }\r\n\r\n    setRaw(name, data, expires = null, path = '/', domain = null, sameSite = 'lax') {\r\n        if (expires) {\r\n            if (expires <= new Date()) {\r\n                return\r\n            }\r\n            this.localCacheHandler.set(name + '___expires', expires.toString())\r\n        }\r\n        this.localCacheHandler.set(name + '___path', path)\r\n        this.localCacheHandler.set(name, data)\r\n    }\r\n\r\n    getRaw(name) {\r\n        const expires = this.localCacheHandler.get(name + '___expires')\r\n        if (expires && new Date(expires) <= new Date()) {\r\n            this.remove([\r\n                name + '___expires',\r\n                name + '___path',\r\n                name,\r\n            ])\r\n            return null\r\n        }\r\n        const path = this.localCacheHandler.get(name + '___path')\r\n        if (window.location.pathname.indexOf(path) !== 0) {\r\n            return null\r\n        }\r\n        return this.localCacheHandler.get(name)\r\n    }\r\n\r\n    remove(names, path = '/', domain = null) {\r\n        for (const i in names) {\r\n            this.localCacheHandler.remove(names[i])\r\n        }\r\n    }\r\n}"],"file":"local-cookie-handler.js"}