{"version":3,"sources":["../../../src/cookie/cookie-handlers/local-cookie-handler.js"],"names":["LocalCookieHandler","crypto","settings","localCacheHandler","LocalCacheHandler","name","suffix","data","expires","path","domain","sameSite","Date","set","naming","toString","get","remove","window","location","pathname","indexOf","names","i","CookieHandler"],"mappings":"wGAAA,+CACA,kC,8kFAEaA,CAAAA,kB,gIACT,4BAAYC,MAAZ,CAAoBC,QAApB,CAA8B,oDAC1B,uBAAMD,MAAN,CAAcC,QAAd,EAEA,MAAKC,iBAAL,CAAyB,GAAIC,yBAA7B,CAH0B,YAI7B,C,qEAEMC,I,CAAqB,IAAfC,CAAAA,MAAe,2DAAN,IAAM,CACxB,MAAO,aAAeD,IAAf,EAAuBC,MAAM,CAAG,MAAQA,MAAX,CAAoB,EAAjD,CACV,C,sCAEMD,I,CAAME,I,CAAmE,IAA7DC,CAAAA,OAA6D,2DAAnD,IAAmD,IAA7CC,CAAAA,IAA6C,2DAAtC,GAAsC,IAAjCC,CAAAA,MAAiC,2DAAxB,IAAwB,IAAlBC,CAAAA,QAAkB,2DAAP,KAAO,CAC5E,GAAIH,OAAJ,CAAa,CACT,GAAIA,OAAO,EAAI,GAAII,CAAAA,IAAnB,CAA2B,CACvB,MACH,CACD,KAAKT,iBAAL,CAAuBU,GAAvB,CAA2B,KAAKC,MAAL,CAAYT,IAAZ,CAAkB,SAAlB,CAA3B,CAAyDG,OAAO,CAACO,QAAR,EAAzD,CACH,CACD,KAAKZ,iBAAL,CAAuBU,GAAvB,CAA2B,KAAKC,MAAL,CAAYT,IAAZ,CAAkB,MAAlB,CAA3B,CAAsDI,IAAtD,EACA,KAAKN,iBAAL,CAAuBU,GAAvB,CAA2B,KAAKC,MAAL,CAAYT,IAAZ,CAA3B,CAA8CE,IAA9C,CACH,C,sCAEMF,I,CAAM,CACT,GAAMG,CAAAA,OAAO,CAAG,KAAKL,iBAAL,CAAuBa,GAAvB,CAA2B,KAAKF,MAAL,CAAYT,IAAZ,CAAkB,SAAlB,CAA3B,CAAhB,CACA,GAAIG,OAAO,EAAI,GAAII,CAAAA,IAAJ,CAASJ,OAAT,GAAqB,GAAII,CAAAA,IAAxC,CAAgD,CAC5C,KAAKK,MAAL,CAAY,CAACZ,IAAD,CAAZ,EACA,MAAO,KACV,CACD,GAAMI,CAAAA,IAAI,CAAG,KAAKN,iBAAL,CAAuBa,GAAvB,CAA2B,KAAKF,MAAL,CAAYT,IAAZ,CAAkB,MAAlB,CAA3B,CAAb,CACA,GAAIa,MAAM,CAACC,QAAP,CAAgBC,QAAhB,CAAyBC,OAAzB,CAAiCZ,IAAjC,IAA2C,CAA/C,CAAkD,CAC9C,MAAO,KACV,CACD,MAAO,MAAKN,iBAAL,CAAuBa,GAAvB,CAA2B,KAAKF,MAAL,CAAYT,IAAZ,CAA3B,CACV,C,sCAEMiB,K,CAAkC,IAA3Bb,CAAAA,IAA2B,2DAApB,GAAoB,IAAfC,CAAAA,MAAe,2DAAN,IAAM,CACrC,IAAK,GAAMa,CAAAA,CAAX,GAAgBD,CAAAA,KAAhB,CAAuB,CACnB,GAAMjB,CAAAA,IAAI,CAAGiB,KAAK,CAACC,CAAD,CAAlB,CACA,GAAId,IAAI,EAAI,KAAKN,iBAAL,CAAuBa,GAAvB,CAA2B,KAAKF,MAAL,CAAYT,IAAZ,CAAkB,MAAlB,CAA3B,CAAZ,CAAmE,CAC/D,KAAKF,iBAAL,CAAuBc,MAAvB,CAA8B,KAAKH,MAAL,CAAYT,IAAZ,CAAkB,SAAlB,CAA9B,EACA,KAAKF,iBAAL,CAAuBc,MAAvB,CAA8B,KAAKH,MAAL,CAAYT,IAAZ,CAAkB,MAAlB,CAA9B,EACA,KAAKF,iBAAL,CAAuBc,MAAvB,CAA8B,KAAKH,MAAL,CAAYT,IAAZ,CAA9B,CACH,CACJ,CACJ,C,+BA5CmCmB,4B","sourcesContent":["import {CookieHandler} from './cookie-handler'\r\nimport {LocalCacheHandler} from '../../cache'\r\n\r\nexport class LocalCookieHandler extends CookieHandler {\r\n    constructor(crypto, settings) {\r\n        super(crypto, settings)\r\n\r\n        this.localCacheHandler = new LocalCacheHandler()\r\n    }\r\n\r\n    naming(name, suffix = null) {\r\n        return '___cookie_' + name + (suffix ? '___' + suffix : '')\r\n    }\r\n\r\n    setRaw(name, data, expires = null, path = '/', domain = null, sameSite = 'lax') {\r\n        if (expires) {\r\n            if (expires <= new Date()) {\r\n                return\r\n            }\r\n            this.localCacheHandler.set(this.naming(name, 'expires'), expires.toString())\r\n        }\r\n        this.localCacheHandler.set(this.naming(name, 'path'), path)\r\n        this.localCacheHandler.set(this.naming(name), data)\r\n    }\r\n\r\n    getRaw(name) {\r\n        const expires = this.localCacheHandler.get(this.naming(name, 'expires'))\r\n        if (expires && new Date(expires) <= new Date()) {\r\n            this.remove([name])\r\n            return null\r\n        }\r\n        const path = this.localCacheHandler.get(this.naming(name, 'path'))\r\n        if (window.location.pathname.indexOf(path) !== 0) {\r\n            return null\r\n        }\r\n        return this.localCacheHandler.get(this.naming(name))\r\n    }\r\n\r\n    remove(names, path = '/', domain = null) {\r\n        for (const i in names) {\r\n            const name = names[i]\r\n            if (path == this.localCacheHandler.get(this.naming(name, 'path'))) {\r\n                this.localCacheHandler.remove(this.naming(name, 'expires'))\r\n                this.localCacheHandler.remove(this.naming(name, 'path'))\r\n                this.localCacheHandler.remove(this.naming(name))\r\n            }\r\n        }\r\n    }\r\n}"],"file":"local-cookie-handler.js"}