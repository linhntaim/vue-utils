"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PromiseManager=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var PromiseManager=/*#__PURE__*/function(){function PromiseManager(){_classCallCheck(this,PromiseManager);this.promises={}}_createClass(PromiseManager,[{key:"add",value:function add(name,promise){this.promises[name]=promise;return this}},{key:"addMany",value:function addMany(promises){Object.assign(this.promises,promises);return this}},{key:"ready",value:function ready(){var _this=this;return new Promise(function(resolve,reject){var names=Object.keys(_this.promises),promising=names.length,thenArgs={};var promised=0,name,promise;if(promising===promised){resolve(thenArgs);return}while((name=names.shift())&&(promise=_this.promises[name])){promise.then(function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}thenArgs[name]=args;if(++promised===promising){resolve(thenArgs)}})["catch"](function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}reject({"catch":{name:name,args:args},then:thenArgs})})}})}}]);return PromiseManager}();exports.PromiseManager=PromiseManager;
//# sourceMappingURL=promise-manager.js.map