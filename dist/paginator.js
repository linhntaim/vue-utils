"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Paginator=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Paginator=/*#__PURE__*/function(){function Paginator(itemsPerPageList,storeHandler){var maxPageShowed=arguments.length>2&&arguments[2]!==undefined?arguments[2]:5;_classCallCheck(this,Paginator);this.itemsPerPageList=itemsPerPageList;this.maxPageShowed=maxPageShowed;this.pagination={itemsPerPage:this.itemsPerPageList[0],current:1,first:1,last:1,atFirst:true,atLast:true,prev:1,next:1,pages:{from:1,to:1},items:{from:0,to:0},totalItems:0};this.storeHandler=storeHandler;this.restoreItemsPerPage()}_createClass(Paginator,[{key:"parsePagination",value:function parsePagination(pagination){if(pagination){var current=parseInt(pagination.current_page);var last=parseInt(pagination.last_page);var first=1;var atLast=current===last;var atFirst=current===first;var pivot=Math.round(this.maxPageShowed/2);var distance=Math.floor(this.maxPageShowed/2);var pageTo=current<pivot?last>this.maxPageShowed?this.maxPageShowed:last:current<last-distance?current+distance:last;var pageFrom=pageTo-this.maxPageShowed+first;this.pagination={itemsPerPage:parseInt(pagination.per_page),current:current,first:first,last:last,atFirst:atFirst,atLast:atLast,prev:atFirst?1:current-1,next:atLast?last:current+1,pages:{from:pageFrom<first?first:pageFrom,to:pageTo},items:{from:parseInt(pagination.from),to:parseInt(pagination.to)},totalItems:parseInt(pagination.total)}}return this}},{key:"parseQuery",value:function parseQuery(queryParams){this.pagination.current=parseInt(queryParams.page)|0;if(this.pagination.current<1)this.pagination.current=1;var itemsPerPage=parseInt(queryParams.items_per_page)|0;if(this.itemsPerPageList.indexOf(itemsPerPage)!==-1){this.pagination.itemsPerPage=itemsPerPage;this.storeItemsPerPage()}return this}},{key:"restoreItemsPerPage",value:function restoreItemsPerPage(){this.pagination.itemsPerPage=parseInt(this.storeHandler.get("items_per_page","0"))|0;if(this.itemsPerPageList.indexOf(this.pagination.itemsPerPage)===-1){this.pagination.itemsPerPage=this.itemsPerPageList[0];this.storeItemsPerPage()}}},{key:"storeItemsPerPage",value:function storeItemsPerPage(){this.storeHandler.set("items_per_page",this.pagination.itemsPerPage.toString())}},{key:"setPage",value:function setPage(page){this.pagination.current=page}},{key:"setItemsPerPage",value:function setItemsPerPage(itemsPerPage){this.pagination.itemsPerPage=itemsPerPage;this.storeItemsPerPage()}}]);return Paginator}();exports.Paginator=Paginator;
//# sourceMappingURL=paginator.js.map